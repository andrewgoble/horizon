<script>
function loadRR() {
    console.log('here')
}
var rrPageVisitLimit = 2;
var loadDelay = 30000;

var rrLogicMode = 'OR'; // 'OR' = time OR pages, 'AND' = time AND pages

// pageview counter (session)
var rrpvc = sessionStorage.getItem('rrpvc') || 0;
rrpvc++;
sessionStorage.setItem('rrpvc', rrpvc);

if (sessionStorage.getItem('rrtdl')) {
    loadRR();
} else {
    var timePassed = false;
    var pagesReached = (rrpvc >= rrPageVisitLimit && rrPageVisitLimit > 0);

    var timeoutID = setTimeout(function() {
        timePassed = true;
        checkConditions();
    }, loadDelay);

    // if we've already hit the page threshold this pageview, evaluate immediately
    if (pagesReached) {
        checkConditions();
    }

    function checkConditions() {
        if (rrLogicMode === 'OR') {
            // fire if either condition is satisfied
            if (
                timePassed ||
                pagesReached ||
                rrPageVisitLimit === 0 // special case: no page limit, allow time trigger
            ) {
                triggerRR();
            }
        } else if (rrLogicMode === 'AND') {
            // only fire if both are satisfied
            if (timePassed && pagesReached) {
                triggerRR();
            }
        }
    }

    function triggerRR() {
        clearTimeout(timeoutID);
        sessionStorage.setItem('rrtdl', "true");
        loadRR();
    }
}
</script>
